# О ch55x

Есть серия недорогих 51 контроллеров от производителя WCH известного своим USB to Serial ch340, и они отличаются отдругих наличием встроенной поддержки USB. ch559 - многоножка, 64к FLASH, умеет быть USB хостом и USB девайсом. Хост/девайс ch554 и девайс ch552 - в корпусе как у 340, 16к FLASH. И младший братишка в таком же корпусе ch551 - 10к FLASH, USB девайс.
Самое прикольное что им не нужен внешний программатор, они программируются прямо по USB (ну или по сериал).

Да, к слову эта либа пока в работе.

# О реализации

Библиотека подразумевает работу контроллера от встроенного генератора без внешнего кварца с частотой 24MHz. USB используется как `Serial`. Библиотека использует `Timer0` для delay(), millis() и других функций связанных с временем. Минимальный квант времени 10 мкс. `Timer1` используется для работы `UART0 (Serial)`. Два таймера - 2 и 3 свободны.
Для вывода в `Serial` используется функция `uprintf("строка формата %d 0x%x\n", var1, var2);`. Поддерживаются модификаторы `%d` - десятичное целое, `%x` - шестнадцатеричное, `%o` - восьмиричное, `%b` - двоичное числа. Строка выводится просто как `uprintf("строка\n");`, а для символов пользуйтесь `putc(c);`. Старайтесь не передавать в `uprintf` много параметров, стэк в контроллере невелик, лучше вызовите функцию несколько раз.